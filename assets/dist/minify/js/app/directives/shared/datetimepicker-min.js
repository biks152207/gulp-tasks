(function(){app.directive("tdzDatetimepicker",["$timeout","$ionicModal",function(e,t){return{require:"ngModel",scope:{ngModel:"=",canClearDate:"@",callback:"&"},link:function(a,i,d){function n(){r=!1,u=!1;var e=a.ngModel?new Date(a.ngModel):(new Date).setHours(0,0,0,0);a.datepicker={date:a.ngModel?new Date(a.ngModel):null,time:new Date(e)},l=a.$watch("datepicker.date",function(e,t){e!=t&&(r=!0,console.log("date changed to : "+e))}),o=a.$watch("datepicker.time",function(e,t){e!=t&&(u=!0,console.log("time changed to : "+e))})}function c(){l&&l(),o&&o()}a.currentTab="date";var o,l,r=!1,u=!1;i.on("click",function(){n(),t.fromTemplateUrl("html/directives/shared/datetimepicker.html",function(e){a.modal=e,a.modal.show()},{scope:a,animation:"scale-in"})}),a.discardDate=function(){a.datepicker.date=void 0},a.discardTime=function(){a.datepicker.time=new Date(a.datepicker.time.setHours(0,0,0,0))},a.save=function(){void 0!==a.datepicker.date||u?(null===a.datepicker.date&&u&&(a.datepicker.date=new Date),a.datepicker.time=new Date(a.datepicker.time),a.datepicker.date=new Date(a.datepicker.date),a.ngModel=new Date(a.datepicker.date.getFullYear(),a.datepicker.date.getMonth(),a.datepicker.date.getDate(),a.datepicker.time.getHours(),a.datepicker.time.getMinutes())):a.ngModel=void 0,c(),e(function(){a.modal.remove(),a.callback({value:r||u||void 0===a.datepicker.date?"CUSTOM_DATE":"NO_DATE",fieldsChanged:{date:r,time:u}})})},a.close=function(){c(),e(function(){a.modal.remove(),a.callback({value:"NO_DATE",fieldsChanged:{date:!1,time:!1}})})}}}}])}).call(this);