(function(){app.controller("editProjectController",["$rootScope","$state","$scope","$ionicModal","$stateParams","userModel","$timeout","sharedData","project","message","discardChange",function(e,o,t,a,r,c,s,n,d,i,l){t.openModal=function(){t.modal.show()},t.selectColor=function(e){t.project.color=e,t.project.border="none"},t.saveKeyEnter=function(e){13==e.keyCode&&t.save()},t.save=function(){t.form.$submitted=!0,t.form.$valid&&(l.isChanged(t.project)?(t.project.updatedBy=c.getLoggedInUser(),d.addOrUpdate(t.project,!0).then(function(o){o&&(e.$emit("toast-message",i.successMessages.PROJECT_EDITED),e.$emit("projectList-update"),l.updateDiscardedBeforeSave(),n.home())})):(l.updateDiscardedBeforeSave(),n.home()))},t.start=function(){d.findById(r.id).then(function(a){a?(t.project=a,e.title=t.project.name,t.colors=n.colorsCodes(),e.$emit("basic:header",o.current.state,t.project,t,!0),l.savePrevious(t,t.project)):n.home()}),a.fromTemplateUrl("html/views/modals/colour_codes.html",function(e){t.modal=e},{scope:t,animation:"scale-in"})},t.start(),t.$on("$stateChangeStart",function(e,o,a){t.modal.remove(),l.changeState(e,o,a,t.project)})}])}).call(this);