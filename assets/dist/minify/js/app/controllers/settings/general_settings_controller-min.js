(function(){app.controller("generalSettingController",["$rootScope","$scope","$state","$ionicModal","settingsService","discardChange","message",function(t,e,n,a,s,o,i){function l(){e.dropdowns={general:!0,dates:!0}}function r(){a.fromTemplateUrl("html/views/modals/settings/general/default_view.html",function(t){e.settingsDefaultViewModal=t},{scope:e,animation:"scale-in"}),a.fromTemplateUrl("html/views/modals/settings/general/float_button.html",function(t){e.settingsFloatButtonModal=t},{scope:e,animation:"scale-in"}),a.fromTemplateUrl("html/views/modals/settings/general/start_day.html",function(t){e.settingsStartDayModal=t},{scope:e,animation:"scale-in"}),a.fromTemplateUrl("html/views/modals/settings/general/date_format.html",function(t){e.settingsDateFormatModal=t},{scope:e,animation:"scale-in"}),a.fromTemplateUrl("html/views/modals/settings/general/time_format.html",function(t){e.settingsTimeFormatModal=t},{scope:e,animation:"scale-in"})}function g(){e.generalSettings=s.getSettings(),o.savePrevious(e,e.generalSettings)}e.redirectTo=function(t){n.transitionTo(t)},e.toggleDropdown=function(t){e.dropdowns[t]=!e.dropdowns[t]},e.setDefaultView=function(t){e.generalSettings.default_view=t},e.setFloatButton=function(t){e.generalSettings.float_button=t},e.setStartDay=function(t){e.generalSettings.start_day=t},e.setDateFormat=function(t){e.generalSettings.date_format=t},e.setTimeFormat=function(t){e.generalSettings.time_format=t},e.save=function(){o.isChanged(e.generalSettings)?s.update(e.generalSettings).then(function(){e.discarded=!0,t.$emit("toast-message",i.successMessages.SETTINGS_SAVED),o.updateDiscardedBeforeSave(),n.go("/settings")}):(o.updateDiscardedBeforeSave(),n.go("/settings"))},e.start=function(){e.title="General",l(),r(),g(),e.defaultViews=s.defaultViews,e.floatButtons=s.floatButtons,e.startDays=s.startDays,e.dateFormats=s.dateFormats,e.timeFormats=s.timeFormats,t.$emit("basic:header",null,null,e,!0,null,!0)},e.start();var m=t.$on("settings-update",function(){g()});e.$on("$destroy",m),e.$on("$stateChangeStart",function(t,n,a){o.changeState(t,n,a,e.generalSettings)})}])}).call(this);