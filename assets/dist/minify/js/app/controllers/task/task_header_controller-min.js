(function(){app.controller("taskHeaderController",["$rootScope","$state","$scope","$ionicPopover","rightMenuService","headerService","user","sharedData","stringService","notificationService","dbEnums","$ionicHistory","navigationService","userModel",function(e,t,a,o,n,i,s,r,c,d,p,u,k,v){function f(){o.fromTemplateUrl("html/views/popovers/top_right_popover.html",{scope:l,animation:"slide-in-right"}).then(function(e){l.popover=e}),o.fromTemplateUrl("html/views/popovers/notification_popover.html",{scope:l}).then(function(e){l.notificationBar=e})}var l=a;l.type=c.EMPTY;var h={};a.items=[],v.isAuthenticated()&&d.getNoOfUnseen().then(function(e){a.NoNN=e}),l.menuItemClicked=function(e,t){l.popover.hide(),n.itemClicked(e,h,l,t)},l.start=function(){f(),n.setMenu(l.type),l.menus=n.getMenu(),l.createButtonName=i.taskHeader.createButtonName,l.createButtonLink=i.taskHeader.createButtonLink,l.noteButtonLink=i.taskHeader.noteButtonLink,l.taskObject=i.taskHeader.taskObject,l.taskId=i.taskHeader.taskId,l.createType=i.taskHeader.createType,l.addTab=i.taskHeader.addTab,l.noteTab=i.taskHeader.noteTab,l.isSaved=i.taskHeader.isSaved,l.disableModification=h&&h.status==p.status.complete},l.save=function(){i.activeScope?i.activeScope.save():t.go("/task/add")},l.back=function(){k.goBack()};var m=e.$on("task:header",function(e,t,a){l.type=t,h=a,l.start()}),g=e.$on("NoNN-update",function(e,t){a.NoNN=t,a.$$phase||a.$apply()});l.$on("$destroy",function(){m(),g()}),l.changeView=function(e,a){"task-add"==e?t.go("/task/add"):"task-edit"==e?t.go("/task/edit",{id:a}):"note"==e&&t.go("/task/note",{id:a})}}])}).call(this);