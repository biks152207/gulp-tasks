!function(){app.service("asyncStackService",["$q",function(e){function t(){function t(t,n,r,c){var i=t,o=n;r=r||this;var u=this,a=!1,s=e.defer();u.promise=s.promise,u.execute=function(){try{var e=i.apply(r,o);e.then?e.then(function(){a=!0,c.removeMe(u),s.resolve()},function(e){a=!0,c.removeMe(u),s.reject(e)}):(a=!0,c.removeMe(u),s.resolve())}catch(e){a=!0,c.removeMe(u),s.reject()}}}function n(){!i&&c.length>0&&(i=c.shift(),i.execute())}var r=this,c=[],i=null;r.stack=function(e,i,o){var u=new t(e,i,o||r,r);c.push(u);try{return n(),u}catch(e){throw c.pop(),e}},r.removeMe=function(e){c.shift(),i=null,n()},r.clear=function(){c.splice(0,c.length)}}var n=this;n.createStacker=function(){return new t}}])}(this);