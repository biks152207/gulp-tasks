!function(){app.service("gAnalytics",["ANALYTICS_CONFIG","platformService","$state","$rootScope","userModel",function(e,t,a,n,i){function o(e){var t=e||a.current.title||a.current.url;e||"/task/list/"!=a.current.name||(t="next7days"==a.params.type?"Next7Days_Filters_Task_List":_.capitalize(a.params.type)+"_Filters_Task_List"),r&&window.cordova?window.ga.trackView(t):(ga("set","page",t),ga("send","pageview"))}function s(){var e,t=i.isAuthenticated();e=t?i.getLoggedInEmail():null,r&&window.cordova?window.ga.setUserId(e):ga("set","userId",e)}var c=this,r=t.isMobileDevice();c.init=function(){r&&window.cordova?(window.ga.startTrackerWithId(e.MOBILE_ID),console.log("analytics registered mobile")):(ga("create",e.WEB_ID,"auto"),ga("send","pageview"),console.log("analytics registered web")),n.$on("$stateChangeSuccess",function(){o()}),n.$on("login-success",function(){s()}),n.$on("logoff-success",function(){s()}),n.$on("set-page",function(e,t){o(t)}),s()}}])}();