(function(){app.service("reminderModel",["TodoZuDB",function(e){var n=this;n.addOrUpdate=function(n,r){var t=e.getDb().open("todozu-db",e.version);t.onsuccess=function(){var e=t.result,o=e.transaction("reminders","readwrite"),s=o.objectStore("reminders");s.put(n),r(null,n),e.close()}},n.getAll=function(n){var r=[],t=e.getDb().open("todozu-db",e.version);t.onsuccess=function(){var e=t.result,o=e.transaction("reminders","readwrite"),s=o.objectStore("reminders");s.openCursor().onsuccess=function(e){var t=e.target.result;t?(r.push(t.value),t.continue()):n(null,r)},e.close()}},n.findById=function(n,r){var t=e.getDb().open("todozu-db",e.version);t.onsuccess=function(){var e=t.result,o=e.transaction("reminders","readwrite"),s=o.objectStore("reminders");s.get(n).onsuccess=function(e){r(null,e.target.result)},e.close()}},n.delete=function(n,r){var t=e.getDb().open("todozu-db",e.version);t.onsuccess=function(){var e=t.result,o=e.transaction("reminders","readwrite"),s=o.objectStore("reminders");s.delete(n).onsuccess=function(e){r(null,!0)},e.close()}},n.deleteRemindersByTaskId=function(n,r){var t=e.getDb().open("todozu-db",e.version);t.onsuccess=function(){var e=t.result,o=e.transaction("reminders","readwrite"),s=o.objectStore("reminders");s.openCursor().onsuccess=function(e){var t=e.target.result;t?(t.value.taskId==n&&t.delete(),t.continue()):r()},e.close()}}}])}).call(this);