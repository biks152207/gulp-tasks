(function(){app.service("labelModel",["$rootScope","TodoZuDB","dbEnums",function(e,t,o){var s=this;s.addOrUpdate=function(o,s){var n=t.getDb().open("todozu-db",t.version);n.onsuccess=function(){var t=n.result,l=t.transaction("labels","readwrite"),a=l.objectStore("labels");a.put(o),s(null,o),t.close(),e.$emit("labelList-update",o)}},s.bulkUpdate=function(o,s){var n=t.getDb().open("todozu-db",t.version);n.onsuccess=function(){for(var t=n.result,l=t.transaction("labels","readwrite"),a=l.objectStore("labels"),u=0;u<o.length;u++)a.put(o[u]);s(),t.close(),e.$emit("labelList-update")}},s.getAll=function(e){var s=[],n=t.getDb().open("todozu-db",t.version);n.onsuccess=function(){var t=n.result,l=t.transaction("labels","readwrite"),a=l.objectStore("labels");a.openCursor().onsuccess=function(t){var n=t.target.result;n?(n.value.status===o.status.active&&s.push(n.value),n.continue()):e(null,s)},t.close()}},s.findById=function(e,o){var s=t.getDb().open("todozu-db",t.version);s.onsuccess=function(){var t=s.result,n=t.transaction("labels","readwrite"),l=n.objectStore("labels");l.get(e).onsuccess=function(e){o(null,e.target.result)},t.close()}},s.delete=function(o,s){var n=t.getDb().open("todozu-db",t.version);n.onsuccess=function(){var t=n.result,l=t.transaction("labels","readwrite"),a=l.objectStore("labels");a.delete(o).onsuccess=function(t){s(null,!0),e.$emit("labelList-update")},t.close()}}}])}).call(this);